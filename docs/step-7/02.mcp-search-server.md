# 02. ê²€ìƒ‰ Function êµ¬í˜„: Spring AI Function Calling

## í•™ìŠµ ì „ì œì¡°ê±´

ì´ ë¬¸ì„œë¥¼ í•™ìŠµí•˜ê¸° ì „ì— ë‹¤ìŒ ë‚´ìš©ì„ ì•Œê³  ìˆìœ¼ë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤:
- Week 5ì˜ MCP ê°œë… ì´í•´
- Week 1~2ì˜ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„ ê²½í—˜
- Spring Boot ê¸°ì´ˆ
- Java Record ì´í•´

---

## 1. ê°œìš”

ì´ ë¬¸ì„œì—ì„œëŠ” **ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœì˜ Function**ë¶€í„° ì‹œì‘í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ ê¸°ëŠ¥ì„ í™•ì¥í•´ ë‚˜ê°€ê² ìŠµë‹ˆë‹¤.

**í•™ìŠµ ë¡œë“œë§µ:**
```
Level 1 (ì´ ë¬¸ì„œ):   ë‹¨ì¼ Function - ë‚´ë¶€ ë„ì„œ ê²€ìƒ‰
Level 2 (ë‹¤ìŒ ë¬¸ì„œ): ì™¸ë¶€ API ì—°ë™ - ë„ì„œê´€ì •ë³´ë‚˜ë£¨
Level 3 (ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜): ë‹¤ì¤‘ Function ì¡°í•©
```

**Level 1 í•™ìŠµ ëª©í‘œ:**
- Spring AI Function Calling ê¸°ì´ˆ ì´í•´
- ë‹¨ì¼ í•¨ìˆ˜ ì •ì˜ ë° ë“±ë¡
- AIê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì›ë¦¬ ì²´í—˜
- ë‚´ë¶€ DBì™€ì˜ ì—°ë™

---

## 2. Spring AI Function Calling ê¸°ì´ˆ

### 2.1. Function Callingì´ë€?

**ê¸°ì¡´ ë°©ì‹:**
```java
// ê°œë°œìê°€ ì§ì ‘ ë¡œì§ ì‘ì„±
@GetMapping("/search")
public List<Book> search(@RequestParam String query) {
    return bookService.searchBooks(query);
}
```

**Function Calling ë°©ì‹:**
```java
// AIê°€ í•„ìš”í•  ë•Œ ìë™ìœ¼ë¡œ í˜¸ì¶œ
@Description("ë„ì„œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤")
public Function<SearchRequest, SearchResult> searchBooks() {
    return request -> {
        return bookService.searchBooks(request.query());
    };
}
```

### 2.2. ì‘ë™ ì›ë¦¬

```
ì‚¬ìš©ì: "ìë°” ì±… ì°¾ì•„ì¤˜"
   â†“
AI ë¶„ì„: "ì±… ê²€ìƒ‰ì´ í•„ìš”í•˜ë„¤"
   â†“
AI íŒë‹¨: "searchBooks í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ê² ë‹¤"
   â†“
í•¨ìˆ˜ ì‹¤í–‰: searchBooks("ìë°”")
   â†“
ê²°ê³¼ ë°˜í™˜: [ì±…1, ì±…2, ì±…3]
   â†“
AI ì‘ë‹µ: "3ê¶Œì˜ ìë°” ì±…ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤..."
```

---

## 3. Level 1: ë‹¨ì¼ Function êµ¬í˜„

ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœë¶€í„° ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤. ë‚´ë¶€ DBì— ìˆëŠ” ë„ì„œë¥¼ ê²€ìƒ‰í•˜ëŠ” Function í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

### STEP 1: ì˜ì¡´ì„± í™•ì¸

**pom.xml** - ì´ë¯¸ ì¶”ê°€ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
```xml
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-starter-model-google-genai</artifactId>
</dependency>
```

### STEP 2: ìš”ì²­/ì‘ë‹µ DTO ì •ì˜

ê°„ë‹¨í•œ DTOë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.

**BookSearchRequest.java**
```java
package com.nhnacademy.library.ai.function.dto;

import lombok.Builder;

/**
 * ë„ì„œ ê²€ìƒ‰ ìš”ì²­ (ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœ)
 */
@Builder
public record BookSearchRequest(
    String query,      // ê²€ìƒ‰ì–´
    int limit         // ìµœëŒ€ ê²°ê³¼ ìˆ˜ (ê¸°ë³¸ê°’ 10)
) {
    public static BookSearchRequest of(String query) {
        return new BookSearchRequest(query, 10);
    }
}
```

**BookSearchResult.java**
```java
package com.nhnacademy.library.ai.function.dto;

import lombok.Builder;

import java.util.List;

/**
 * ë„ì„œ ê²€ìƒ‰ ê²°ê³¼ (ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœ)
 */
@Builder
public record BookSearchResult(
    int count,
    List<BookItem> books
) {
    @Builder
    public record BookItem(
        long id,
        String title,
        String author,
        String publisher
    ) {}
}
```

### STEP 3: ì²« ë²ˆì§¸ Function êµ¬í˜„

ì´ì œ ì²« ë²ˆì§¸ Functionì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

**BookSearchFunction.java**
```java
package com.nhnacademy.library.ai.function;

import com.nhnacademy.library.ai.function.dto.BookSearchRequest;
import com.nhnacademy.library.ai.function.dto.BookSearchResult;
import com.nhnacademy.library.core.book.dto.BookSearchResponse;
import com.nhnacademy.library.core.book.service.search.BookSearchService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.context.annotation.Description;
import org.springframework.stereotype.Component;

import java.util.function.Function;

/**
 * Level 1: ë‹¨ì¼ ë„ì„œ ê²€ìƒ‰ Function
 *
 * ê°€ì¥ ë‹¨ìˆœí•œ í˜•íƒœì˜ Function êµ¬í˜„
 * - ë‚´ë¶€ DB ê²€ìƒ‰ë§Œ ìˆ˜í–‰
 * - í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ì œê³µ
 */
@Component
@RequiredArgsConstructor
@Slf4j
public class BookSearchFunction {

    private final BookSearchService bookSearchService;

    /**
     * ë„ì„œ ê²€ìƒ‰ í•¨ìˆ˜
     *
     * @Descriptionì˜ ì¤‘ìš”ì„±:
     * AIê°€ ì´ ì„¤ëª…ì„ ì½ê³  ì–¸ì œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí• ì§€ íŒë‹¨í•©ë‹ˆë‹¤.
     * ê°€ëŠ¥í•œ ëª…í™•í•˜ê²Œ ì‘ì„±í•˜ì„¸ìš”.
     */
    @Description("ë„ì„œê´€ ì‹œìŠ¤í…œì—ì„œ ë„ì„œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. " +
            "ì œëª©, ì €ìëª…ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
    public Function<BookSearchRequest, BookSearchResult> searchBooks() {
        return request -> {
            log.info("[Function] ë„ì„œ ê²€ìƒ‰ ì‹œì‘: query={}", request.query());

            try {
                // 1. ë‚´ë¶€ DB ê²€ìƒ‰ ì‹¤í–‰
                var books = bookSearchService.searchBooks(
                    com.nhnacademy.library.core.book.dto.BookSearchRequest.builder()
                        .query(request.query())
                        .searchType(com.nhnacademy.library.core.book.service.search.SearchType.HYBRID)
                        .limit(request.limit())
                        .build()
                );

                // 2. ê²°ê³¼ ë³€í™˜
                var items = books.stream()
                    .map(this::toBookItem)
                    .toList();

                log.info("[Function] ê²€ìƒ‰ ì™„ë£Œ: {}ê¶Œ", items.size());

                return BookSearchResult.builder()
                    .count(items.size())
                    .books(items)
                    .build();

            } catch (Exception e) {
                log.error("[Function] ê²€ìƒ‰ ì‹¤íŒ¨", e);
                // ì‹¤íŒ¨í•´ë„ ë¹ˆ ê²°ê³¼ ë°˜í™˜
                return BookSearchResult.builder()
                    .count(0)
                    .books(java.util.List.of())
                    .build();
            }
        };
    }

    private BookSearchResult.BookItem toBookItem(BookSearchResponse book) {
        return BookSearchResult.BookItem.builder()
            .id(book.id())
            .title(book.title())
            .author(book.authorName())
            .publisher(book.publisherName())
            .build();
    }
}
```

### STEP 4: ChatClientì— í•¨ìˆ˜ ë“±ë¡

ì´ì œ ë§Œë“  í•¨ìˆ˜ë¥¼ ChatClientì— ë“±ë¡í•©ë‹ˆë‹¤.

**AiConfig.java**
```java
package com.nhnacademy.library.core.config;

import com.nhnacademy.library.ai.function.BookSearchFunction;
import lombok.RequiredArgsConstructor;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.ai.chat.model.ChatModel;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * AI ì„¤ì • - Level 1
 *
 * ë‹¨ì¼ í•¨ìˆ˜ë§Œ ë“±ë¡í•˜ëŠ” ê°€ì¥ ë‹¨ìˆœí•œ ì„¤ì •
 */
@Configuration
@RequiredArgsConstructor
public class AiConfig {

    private final ChatModel chatModel;
    private final BookSearchFunction bookSearchFunction;

    @Bean
    public ChatClient chatClient() {
        return ChatClient.builder(chatModel)
            // í•¨ìˆ˜ ë“±ë¡: ì§€ê¸ˆì€ í•˜ë‚˜ë§Œ
            .defaultFunctions(bookSearchFunction.searchBooks())
            .build();
    }
}
```

### STEP 5: AI ì„œë¹„ìŠ¤ êµ¬í˜„

**AiBookSearchService.java**
```java
package com.nhnacademy.library.ai.service;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.ai.chat.client.ChatClient;
import org.springframework.stereotype.Service;

/**
 * AI ë„ì„œ ê²€ìƒ‰ ì„œë¹„ìŠ¤ - Level 1
 */
@Service
@RequiredArgsConstructor
@Slf4j
public class AiBookSearchService {

    private final ChatClient chatClient;

    /**
     * ìì—°ì–´ ë„ì„œ ê²€ìƒ‰
     *
     * ì‚¬ìš©ìê°€ ìì—°ì–´ë¡œ ì§ˆë¬¸í•˜ë©´:
     * 1. AIê°€ í•¨ìˆ˜ í˜¸ì¶œ í•„ìš” ì—¬ë¶€ íŒë‹¨
     * 2. í•„ìš”í•˜ë©´ searchBooks() í•¨ìˆ˜ í˜¸ì¶œ
     * 3. ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìì—°ì–´ ì‘ë‹µ ìƒì„±
     */
    public String searchBooks(String userMessage) {
        log.info("ì‚¬ìš©ì ìš”ì²­: {}", userMessage);

        String response = chatClient.prompt()
            .user(userMessage)
            .call()
            .content();

        log.info("AI ì‘ë‹µ: {}", response);
        return response;
    }
}
```

### STEP 6: ì»¨íŠ¸ë¡¤ëŸ¬

**AiSearchController.java**
```java
package com.nhnacademy.library.front.web;

import com.nhnacademy.library.ai.service.AiBookSearchService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

/**
 * AI ê²€ìƒ‰ ì»¨íŠ¸ë¡¤ëŸ¬ - Level 1
 */
@Controller
@RequiredArgsConstructor
public class AiSearchController {

    private final AiBookSearchService aiBookSearchService;

    @GetMapping("/ai/search")
    @ResponseBody
    public String search(@RequestParam String query) {
        return aiBookSearchService.searchBooks(query);
    }
}
```

---

## 4. ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸

### 4.1. ì‹¤í–‰ íë¦„ ì´í•´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì   â”‚         â”‚ChatClientâ”‚         â”‚ Function  â”‚         â”‚  ë‚´ë¶€   â”‚
â”‚          â”‚         â”‚          â”‚         â”‚          â”‚         â”‚   DB    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚ "ìë°” ì±…"        â”‚                   â”‚                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                    â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚ 1. í•¨ìˆ˜ í™•ì¸      â”‚                    â”‚
     â”‚                   â”‚ â†’ searchBooks    â”‚                    â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚ 2. AI: "í•„ìš”í•¨"   â”‚                    â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚ 3. í•¨ìˆ˜ í˜¸ì¶œ      â”‚                    â”‚
     â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚
     â”‚                   â”‚ searchBooks("ìë°”")                    â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚                   â”‚ 4. DB ì¡°íšŒ        â”‚
     â”‚                   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚                   â”‚ 5. ê²°ê³¼ ë°˜í™˜      â”‚
     â”‚                   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                   â”‚ [ì±…1, ì±…2, ì±…3]   â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚ 6. í•¨ìˆ˜ ê²°ê³¼      â”‚                    â”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
     â”‚                   â”‚                   â”‚                    â”‚
     â”‚                   â”‚ 7. AI ì‘ë‹µ ìƒì„±  â”‚                    â”‚
     â”‚ "3ê¶Œì„ ì°¾ì•˜ìŠµë‹ˆë‹¤"â”‚                   â”‚                    â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                    â”‚
```

### 4.2. í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°

**í…ŒìŠ¤íŠ¸ 1: ê¸°ë³¸ ê²€ìƒ‰**
```
GET /ai/search?query=ìë°”

ì˜ˆìƒ ì‘ë‹µ:
"ë„ì„œê´€ ì‹œìŠ¤í…œì—ì„œ ìë°” ê´€ë ¨ ë„ì„œ 3ê¶Œì„ ì°¾ì•˜ìŠµë‹ˆë‹¤:
1. ìë°”ì˜ ì •ì„ - ë‚¨ê¶ì„±
2. ì´ê²ƒì´ ìë°”ë‹¤ - ë°•ë§¤ì¼
3. ì½”ë”© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ìë°” - ..."
```

**í…ŒìŠ¤íŠ¸ 2: í•¨ìˆ˜ ë¯¸ì‚¬ìš©**
```
GET /ai/search?query=ì•ˆë…•í•˜ì„¸ìš”

AI ë™ì‘:
- ê²€ìƒ‰ì´ í•„ìš” ì—†ë‹¤ê³  íŒë‹¨
- í•¨ìˆ˜ í˜¸ì¶œ ì—†ì´ ë°”ë¡œ ì‘ë‹µ
- "ì•ˆë…•í•˜ì„¸ìš”! ë„ì„œê´€ AI ë„ìš°ë¯¸ì…ë‹ˆë‹¤."
```

**í…ŒìŠ¤íŠ¸ 3: êµ¬ì²´ì  ê²€ìƒ‰**
```
GET /ai/search?query=ë‚¨ê¶ì„± ì±…

AI ë™ì‘:
- searchBooks í•¨ìˆ˜ í˜¸ì¶œ
- query: "ë‚¨ê¶ì„±"
```

---

## 5. ë””ë²„ê¹…: AIê°€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ í™•ì¸

**ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”:**

```log
[Function] ë„ì„œ ê²€ìƒ‰ ì‹œì‘: query=ìë°”
[Function] ê²€ìƒ‰ ì™„ë£Œ: 3ê¶Œ
```

ì´ ë¡œê·¸ê°€ ë³´ì´ë©´ AIê°€ í•¨ìˆ˜ë¥¼ ì„±ê³µì ìœ¼ë¡œ í˜¸ì¶œí•œ ê²ƒì…ë‹ˆë‹¤!

---

## 6. í˜„ì¬ê¹Œì§€ êµ¬í˜„í•œ ê²ƒ

âœ… **ì™„ë£Œ:**
- ë‹¨ì¼ Function ì •ì˜
- ChatClientì— í•¨ìˆ˜ ë“±ë¡
- AIê°€ í•¨ìˆ˜ ìë™ í˜¸ì¶œ
- ë‚´ë¶€ DB ì—°ë™

â“ **ë‹¤ìŒ ë‹¨ê³„:**
- ì™¸ë¶€ API ì—°ë™ (Level 2)
- ì—¬ëŸ¬ í•¨ìˆ˜ ì¡°í•© (Level 3)

---

## 7. ì‹¤ìŠµ ë¯¸ì…˜: â­ ë‹¨ì¼ Function í˜¸ì¶œ

**ë‚œì´ë„**: ì…ë¬¸ | **ì˜ˆìƒ ì‹œê°„**: 30ë¶„

ì´ ì„¹ì…˜ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ì§ì ‘ ì‹¤ìŠµí•´ ë³´ì„¸ìš”.

> **ğŸ“˜ ì „ì²´ ë¯¸ì…˜ ê°€ì´ë“œ**: 5ë‹¨ê³„ ë‚œì´ë„ë³„ ë¯¸ì…˜ì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
>
> **ìƒì„¸ ë¯¸ì…˜**: [05.mission-scenarios.md](./05.mission-scenarios.md#-ë¯¸ì…˜-1-ë‹¨ì¼-function-è°ƒç”¨---ë„ì„œ-ê²€ìƒ‰)

### ë¯¸ì…˜ ê°œìš”

```
ì‚¬ìš©ì: "ìë°” ì±… 5ê¶Œ ì¶”ì²œí•´ì¤˜"

AI ë™ì‘:
1. search_books Function í˜¸ì¶œ
2. ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ì¹œì ˆí•˜ê²Œ ì„¤ëª…
```

### ì‹¤ìŠµ ê³¼ì •

#### STEP 1: Function ì„¤ëª… ì´í•´

`@Description`ì´ AIì˜ í–‰ë™ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”.

```java
// í…ŒìŠ¤íŠ¸ 1: ì„¤ëª…ì´ ëª…í™•í•  ë•Œ
@Description("ë„ì„œê´€ ì‹œìŠ¤í…œì—ì„œ ë„ì„œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. " +
            "ì œëª©, ì €ìëª…ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
```

```java
// í…ŒìŠ¤íŠ¸ 2: ì„¤ëª…ì´ ëª¨í˜¸í•  ë•Œ
@Description("ì±…ì„ ì°¾ì•„ì£¼ì„¸ìš”")  // ë„ˆë¬´ ì¼ë°˜ì ì„
```

#### STEP 2: íŒŒë¼ë¯¸í„° ìµœì í™”

```java
@Description("ë„ì„œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤")
public Function<BookSearchRequest, BookSearchResult> searchBooks() {
    return request -> {
        // request.query()ê°€ nullì´ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
        String query = request.query() != null ? request.query() : "ìë°”";
        int limit = request.limit() > 0 ? request.limit() : 5;

        // ê²€ìƒ‰ ë¡œì§...
    };
}
```

#### STEP 3: ê²°ê³¼ í”„ë ˆì  í…Œì´ì…˜

ê²€ìƒ‰ ê²°ê³¼ë¥¼ AIê°€ ì–´ë–»ê²Œ ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•˜ëŠ”ì§€ ê°œì„ í•´ë³´ì„¸ìš”.

```java
// ê²€ìƒ‰ ê²°ê³¼ì— ì¶”ê°€ ì •ë³´ í¬í•¨
@Builder
public record BookSearchResult(
    int count,
    List<BookItem> books,
    String message  // ì¶”ê°€: ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€
) {}
```

---

## 8. í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë‹¤ìŒ ë‚´ìš©ì„ ì´í•´í–ˆëŠ”ì§€ í™•ì¸í•´ ë³´ì„¸ìš”:

### ê¸°ë³¸ ê°œë…
- [ ] Function Callingì´ ë¬´ì—‡ì¸ì§€ ì´í•´í–ˆë‹¤
- [ ] ë‹¨ì¼ Functionì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤
- [ ] ChatClientì— í•¨ìˆ˜ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë‹¤

### êµ¬í˜„ ëŠ¥ë ¥
- [ ] AIê°€ í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤
- [ ] ë‚´ë¶€ DBì™€ ì—°ë™í•  ìˆ˜ ìˆë‹¤
- [ ] ë¡œê·¸ë¥¼ í†µí•´ í•¨ìˆ˜ í˜¸ì¶œì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤

### ì‹¤ìŠµ ì™„ë£Œ
- [ ] ë¯¸ì…˜ 1ì˜ ëª¨ë“  êµ¬í˜„ì„ ì™„ë£Œí–ˆë‹¤

---

## 9. ë‹¤ìŒ ë‹¨ê³„: Level 2 - ì™¸ë¶€ API ì—°ë™

Level 1ì„ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ”:

**Level 2: ë„ì„œê´€ì •ë³´ë‚˜ë£¨ API ì—°ë™**
- â­â­ ë¯¸ì…˜ 2: ë³µìˆ˜ Function ì¡°í•© (ë„ì„œ + ë¦¬ë·°)
- Fallback íŒ¨í„´ êµ¬í˜„ (ë‚´ë¶€ DB â†’ ì™¸ë¶€ API)
- ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸ í™œìš©

[ë‹¤ìŒ: 03. ì™¸ë¶€ API Function êµ¬í˜„ â†’](03.mcp-external-api.md)

---

## 10. ì‹¤ìŠµ ì•ˆë‚´

**â­ ë¯¸ì…˜ 1 ì‹¤ìŠµ**

ì´ ì„¹ì…˜ì—ì„œ í•™ìŠµí•œ ë‹¨ì¼ Function í˜¸ì¶œì„ ì§ì ‘ ì‹¤ìŠµí•´ ë³´ì„¸ìš”.

ìƒì„¸ ê°€ì´ë“œ: **[05.mission-scenarios.md â†’ â­ ë¯¸ì…˜ 1](./05.mission-scenarios.md#-ë¯¸ì…˜-1-ë‹¨ì¼-function-è°ƒç”¨---ë„ì„œ-ê²€ìƒ‰)**

**ì‹¤ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] `@Description`ìœ¼ë¡œ Function ëª©ì  ëª…í™•íˆ ì •ì˜
- [ ] `@Description`ìœ¼ë¡œ íŒŒë¼ë¯¸í„° ì„¤ëª… ì¶”ê°€
- [ ] ChatClientì— Function ë“±ë¡
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
- [ ] AIê°€ Functionì„ ì˜¬ë°”ë¥´ê²Œ í˜¸ì¶œí•˜ëŠ”ì§€ í™•ì¸
