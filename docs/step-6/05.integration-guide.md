# Phase 5: μ „μ²΄ μ‹μ¤ν… ν†µν•© κ°€μ΄λ“

## ν•™μµ κ°μ”

Step 6 κ°μΈν™” μ¶”μ² μ‹μ¤ν…μ **μ „μ²΄ μ•„ν‚¤ν…μ²μ™€ κµ¬ν„ νλ¦„**μ„ μΆ…ν•©μ μΌλ΅ μ •λ¦¬ν•©λ‹λ‹¤. κ° μ»΄ν¬λ„νΈ κ°„μ μƒνΈμ‘μ©, λ°μ΄ν„° νλ¦„, κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈλ¥Ό ν†µν•΄ μ‹μ¤ν… μ „μ²΄λ¥Ό μ΄ν•΄ν•κ³  κµ¬ν„ν•  μ μλ„λ΅ μ•λ‚΄ν•©λ‹λ‹¤.

## ν•™μµ λ©ν‘

1. **μ „μ²΄ μ•„ν‚¤ν…μ² μ΄ν•΄**
   - κ°μΈν™” μ „ν›„ μ‹μ¤ν… λΉ„κµ
   - κ° μ»΄ν¬λ„νΈμ μ—­ν• κ³Ό μ±…μ„
   - λ°μ΄ν„° νλ¦„κ³Ό μμ΅΄κ΄€κ³„

2. **κµ¬ν„ λ‹¨κ³„λ³„ μ²΄ν¬λ¦¬μ¤νΈ**
   - Phaseλ³„ κµ¬ν„ ν•­λ© μ κ²€
   - μμ„λ³„ κµ¬ν„ κ°€μ΄λ“
   - μ™„λ£ κΈ°μ¤€ μ •μ

3. **ν…μ¤νΈ μ‹λ‚λ¦¬μ¤**
   - λ‹¨μ„ ν…μ¤νΈ μ „λµ
   - ν†µν•© ν…μ¤νΈ μ‹λ‚λ¦¬μ¤
   - μ‚¬μ©μ acceptance ν…μ¤νΈ

4. **μ΄μ λ¨λ‹ν„°λ§**
   - μ„±λ¥ μ§€ν‘(KPI) μ •μ
   - λ¨λ‹ν„°λ§ λ€μƒ μ„ μ •
   - μ•λ¦Ό μ„¤μ • κ°€μ΄λ“

---

## 1. μ „μ²΄ μ‹μ¤ν… μ•„ν‚¤ν…μ²

### 1.1 κ°μΈν™” μ „ (Step 1-5)

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                        μ‚¬μ©μ μ”μ²­                              β”‚
β”‚                    κ²€μƒ‰: "μλ°” μ›Ή κ°λ°"                         β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    LibraryTelegramBot                          β”‚
β”‚  β€Ά onUpdateReceived() λ©”μ„λ“λ΅ λ©”μ‹μ§€ μμ‹                       β”‚
β”‚  β€Ά handleSearch() λ©”μ„λ“λ΅ κ²€μƒ‰ μ²λ¦¬                            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                     BookSearchService                          β”‚
β”‚  β€Ά searchBooks(query, topK) νΈμ¶                               β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   HybridSearchStrategy                         β”‚
β”‚  β€Ά λ‘ κ°€μ§€ κ²€μƒ‰ λ³‘λ ¬ μ‹¤ν–‰                                       β”‚
β”‚  β”β”€ KeywordSearchStrategy: μ „μ²΄ ν…μ¤νΈ κ²€μƒ‰ (LIKE)            β”‚
β”‚  β””β”€ VectorSearchStrategy: μ„λ² λ”© μ μ‚¬λ„ κ²€μƒ‰ (<=>)            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β”‚                          β”‚
                 β–Ό                          β–Ό
        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
        β”‚  DB Full-text  β”‚        β”‚   pgvector     β”‚
        β”‚    (title,     β”‚        β”‚   (embedding)  β”‚
        β”‚    content)    β”‚        β”‚   similarity   β”‚
        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β”‚                          β”‚
                 β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                            β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                       RRF Fusion                               β”‚
β”‚  β€Ά Reciprocal Rank Fusion μ•κ³ λ¦¬μ¦                             β”‚
β”‚  β€Ά λ‘ κ²€μƒ‰ κ²°κ³Ό λ³‘ν•© λ° μμ„ κ³„μ‚°                               β”‚
β”‚  β€Ά score = 1/(k+rank1) + 1/(k+rank2)  (k=60)                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    κ²€μƒ‰ κ²°κ³Ό λ°ν™                              β”‚
β”‚  β€Ά μƒμ„ topKκ° λ„μ„ λ¦¬μ¤νΈ                                     β”‚
β”‚  β€Ά RRF μ μ ν¬ν•¨                                               β”‚
β”‚  β€Ά Inline Keyboard (ν”Όλ“λ°± λ²„νΌ)                               β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 1.2 κ°μΈν™” ν›„ (Step 6)

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                        μ‚¬μ©μ μ”μ²­                              β”‚
β”‚                    κ²€μƒ‰: "μλ°” μ›Ή κ°λ°"                         β”‚
β”‚                      chatId: 12345                             β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    LibraryTelegramBot                          β”‚
β”‚  β€Ά onUpdateReceived() λ©”μ„λ“λ΅ λ©”μ‹μ§€ μμ‹                       β”‚
β”‚  β€Ά handleSearch() λ©”μ„λ“λ΅ κ²€μƒ‰ μ²λ¦¬                            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                     BookSearchService                          β”‚
β”‚  β€Ά searchBooks(query, chatId, topK) νΈμ¶                       β”‚
β”‚  β€Ά chatIdλ¥Ό ν†µν•΄ κ°μΈν™” κ°€λ¥                                   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                    β–Ό                         β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  HybridSearchStrategy    β”‚   β”‚  PersonalizationService          β”‚
β”‚  (κΈ°μ΅΄ κ²€μƒ‰)              β”‚   β”‚  (μ„ νΈλ„ λ²΅ν„° μ΅°ν)              β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
            β”‚                                  β”‚
            β–Ό                                  β–Ό
   [κ²€μƒ‰ κ²°κ³Ό 1~K]                   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
   RRF μ μ ν¬ν•¨                     β”‚ μΊμ‹ ν™•μΈ           β”‚
                                    β”‚ (Redis 24μ‹κ°„)      β”‚
                                    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                               β”‚
                                    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                    β–Ό                     β–Ό
                              μΊμ‹ ννΈ?            μΊμ‹ λ―Έμ¤?
                                    β”‚                     β”‚
                                    β–Ό                     β–Ό
                            [μ„ νΈλ„ λ²΅ν„° λ°ν™]   [DB μ΅°ν ν›„ κ³„μ‚°]
                            float[1024]          β€Ά ν”Όλ“λ°± μ΅°ν
                                                 β€Ά GOOD ν•„ν„°λ§
                                                 β€Ά μ„λ² λ”© μ¶”μ¶
                                                 β€Ά ν‰κ·  κ³„μ‚°
                                                 β€Ά μΊμ‹ μ €μ¥
                                    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                               β”‚
                                    [μ„ νΈλ„ λ²΅ν„° μ™„μ„±]
                                    float[1024]
                                               β”‚
                                               β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                   κ°μΈν™” μ¬μ •λ ¬                                 β”‚
β”‚  β€Ά κ° λ„μ„λ³„ μ„ νΈλ„μ™€μ μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°                       β”‚
β”‚  β€Ά μµμΆ… μ μ = RRF μ μ + (μ μ‚¬λ„ Γ— 0.3)                        β”‚
β”‚  β€Ά μµμΆ… μ μ κΈ°μ¤€ λ‚΄λ¦Όμ°¨μ μ •λ ¬                                 β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                                 β”‚
                                 β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                 κ°μΈν™”λ κ²€μƒ‰ κ²°κ³Ό λ°ν™                         β”‚
β”‚  β€Ά μƒμ„ topKκ° λ„μ„ λ¦¬μ¤νΈ (μ¬μ •λ ¬λ¨)                           β”‚
β”‚  β€Ά RRF μ μ + κ°μΈν™” μ μ ν¬ν•¨                                 β”‚
β”‚  β€Ά Inline Keyboard + κ°μΈν™” μ•λ‚΄ λ©”μ‹μ§€                         β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 1.3 μ»΄ν¬λ„νΈλ³„ μ—­ν• 

| μ»΄ν¬λ„νΈ | μ—­ν•  | μ…λ ¥ | μ¶λ ¥ |
|---------|------|------|------|
| **LibraryTelegramBot** | μ‚¬μ©μ λ©”μ‹μ§€ μμ‹ , κ²€μƒ‰ μ”μ²­ μ²λ¦¬ | query, chatId | - |
| **BookSearchService** | κ²€μƒ‰ μ„λΉ„μ¤ μ¤μΌ€μ¤νΈλ μ΄μ… | query, chatId | List\<BookSearchResponse\> |
| **HybridSearchStrategy** | ν‚¤μ›λ“ + λ²΅ν„° κ²€μƒ‰ λ³‘λ ¬ μ‹¤ν–‰ | query, topK | List\<BookSearchResponse\> |
| **PersonalizationService** | μ‚¬μ©μ μ„ νΈλ„ λ²΅ν„° κ³„μ‚° λ° μΊμ‹± | chatId | float[1024] λλ” null |
| **VectorUtils** | μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚° | float[], float[] | double |
| **FeedbackRepository** | μ‚¬μ©μ ν”Όλ“λ°± μ΅°ν | chatId | List\<SearchFeedback\> |
| **BookRepository** | λ„μ„ μ„λ² λ”© μ΅°ν | List\<Long\> ids | List\<float[]\> |

---

## 2. λ°μ΄ν„° νλ¦„ μƒμ„Έ λ¶„μ„

### 2.1 μ„ νΈλ„ λ²΅ν„° κ³„μ‚° νλ¦„

```
[νΈλ¦¬κ±°] μ‚¬μ©μκ°€ κ²€μƒ‰ μ”μ²­ (chatId: 12345)
    β”‚
    β–Ό
[Step 1] PersonalizationService.calculateUserPreferenceVector(chatId)
    β”‚
    β–Ό
[Step 2] Redis μΊμ‹ ν™•μΈ
    β”‚
    β”β”€ μΊμ‹ ννΈ?
    β”‚   β””β”€ YES β†’ μ„ νΈλ„ λ²΅ν„° λ°ν™ (μΆ…λ£)
    β”‚
    β””β”€ NO (μΊμ‹ λ―Έμ¤)
        β”‚
        β–Ό
[Step 3] FeedbackRepository μ΅°ν
    β”‚ SELECT * FROM search_feedbacks
    β”‚ WHERE chat_id = 12345
    β”‚ AND type = 'GOOD'
    β”‚ ORDER BY created_at DESC
    β”‚ LIMIT 20
    β”‚
    β–Ό
[Step 4] GOOD ν”Όλ“λ°± λ„μ„ ID μ¶”μ¶
    β”‚ bookIds = [101, 305, 407, 512, 620, ...]
    β”‚
    β–Ό
[Step 5] μ½λ“ μ¤νƒ€νΈ μ²΄ν¬
    β”‚
    β”β”€ bookIds.size() < 3?
    β”‚   β””β”€ YES β†’ null λ°ν™ (κ°μΈν™” λ―Έμ μ©)
    β”‚
    β””β”€ NO (3κ° μ΄μƒ)
        β”‚
        β–Ό
[Step 6] BookRepository μ„λ² λ”© μ΅°ν
    β”‚ SELECT embedding FROM books
    β”‚ WHERE id IN (101, 305, 407, 512, 620, ...)
    β”‚
    β–Ό
[Step 7] λ²΅ν„° ν‰κ·  κ³„μ‚°
    β”‚ result[i] = (emb1[i] + emb2[i] + ...) / count
    β”‚ for i = 0 to 1023
    β”‚
    β–Ό
[Step 8] Redisμ— μΊμ‹± (TTL: 24μ‹κ°„)
    β”‚ key: "userPreferenceVectors::12345"
    β”‚ value: float[1024]
    β”‚
    β–Ό
[μ™„λ£] μ„ νΈλ„ λ²΅ν„° λ°ν™
```

### 2.2 κ°μΈν™” μ¬μ •λ ¬ νλ¦„

```
[μ…λ ¥] κΈ°μ΅΄ κ²€μƒ‰ κ²°κ³Ό (topK=10)
    [
      {id: 1, title: "Effective Java", score: 0.035, embedding: [...]},
      {id: 2, title: "μ¤ν”„λ§ λ¶€νΈε…¥ι—¨", score: 0.025, embedding: [...]},
      {id: 3, title: "μλ°” μ„±λ¥ νλ‹", score: 0.020, embedding: [...]},
      ...
    ]
    β”‚
    β–Ό
[Step 1] μ‚¬μ©μ μ„ νΈλ„ λ²΅ν„° ν™•μΈ
    β”‚
    β”β”€ μ„ νΈλ„ λ²΅ν„° μμ?
    β”‚   β””β”€ YES β†’ κ³„μ† μ§„ν–‰
    β”‚
    β””β”€ null
        β””β”€ κΈ°μ΅΄ κ²°κ³Ό κ·Έλ€λ΅ λ°ν™ (μΆ…λ£)
    β”‚
    β–Ό
[Step 2] κ° λ„μ„λ³„ μ½”μ‚¬μΈ μ μ‚¬λ„ κ³„μ‚°
    β”‚
    β”β”€ λ„μ„ 1: cosine_similarity(preference, embedding1) = 0.40
    β”β”€ λ„μ„ 2: cosine_similarity(preference, embedding2) = 0.85
    β”β”€ λ„μ„ 3: cosine_similarity(preference, embedding3) = 0.75
    β””β”€ ...
    β”‚
    β–Ό
[Step 3] μµμΆ… μ μ κ³„μ‚°
    β”‚
    β”β”€ λ„μ„ 1: finalScore = 0.035 + (0.40 Γ— 0.3) = 0.155
    β”β”€ λ„μ„ 2: finalScore = 0.025 + (0.85 Γ— 0.3) = 0.280
    β”β”€ λ„μ„ 3: finalScore = 0.020 + (0.75 Γ— 0.3) = 0.245
    β””β”€ ...
    β”‚
    β–Ό
[Step 4] μ¬μ •λ ¬ (λ‚΄λ¦Όμ°¨μ)
    β”‚
    β–Ό
[μ¶λ ¥] κ°μΈν™”λ κ²€μƒ‰ κ²°κ³Ό
    [
      {id: 2, title: "μ¤ν”„λ§ λ¶€νΈε…¥ι—¨", finalScore: 0.280, personalization: 0.85},
      {id: 3, title: "μλ°” μ„±λ¥ νλ‹", finalScore: 0.245, personalization: 0.75},
      {id: 1, title: "Effective Java", finalScore: 0.155, personalization: 0.40},
      ...
    ]
```

---

## 3. κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ

### Phase 1: κΈ°μ΄ μ΄λ΅  (ν•„μ μ„ ν•™μµ)

- [ ] λ²΅ν„° μ„λ² λ”©μ κ°λ… μ΄ν•΄
- [ ] BGE-M3 λ¨λΈκ³Ό 1024μ°¨μ› λ²΅ν„° μ΄ν•΄
- [ ] μ½”μ‚¬μΈ μ μ‚¬λ„ μν•™μ  μ •μ μµλ“
- [ ] λ‚΄μ (Dot Product)κ³Ό λ²΅ν„° ν¬κΈ°(Norm) κ³„μ‚° λ°©λ²• μ΄ν•΄

**ν•™μµ μλ£:** `01.vector-embedding-basics.md`

### Phase 2: Repository κ³„μΈµ κµ¬ν„

#### BookRepository ν™•μ¥

```java
public interface BookRepository extends JpaRepository<Book, Long> {

    /**
     * λ„μ„ ID λ©λ΅μΌλ΅ μ„λ² λ”© μ΅°ν
     *
     * @param bookIds λ„μ„ ID λ©λ΅
     * @return μ„λ² λ”© λ¦¬μ¤νΈ (float[1024][])
     */
    @Query("SELECT b.embedding FROM Book b WHERE b.id IN :bookIds")
    List<float[]> findEmbeddingsByIds(@Param("bookIds") List<Long> bookIds);
}
```

**κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] `findEmbeddingsByIds()` λ©”μ„λ“ μ¶”κ°€
- [ ] μΏΌλ¦¬ λ™μ‘ κ²€μ¦ (H2/PostgreSQL)
- [ ] λ‹¨μ„ ν…μ¤νΈ μ‘μ„±

#### FeedbackRepository ν™•μ¥

```java
public interface FeedbackRepository extends JpaRepository<SearchFeedback, Long> {

    /**
     * μ‚¬μ©μμ ν”Όλ“λ°±μ„ μµμ‹ μμΌλ΅ μ΅°ν
     */
    List<SearchFeedback> findByChatIdOrderByCreatedAtDesc(Long chatId);
}
```

**κµ¬ν„ μ²΄ν¬λ¦¬μ¤νΈ:**
- [ ] `findByChatIdOrderByCreatedAtDesc()` λ©”μ„λ“ μ¶”κ°€
- [ ] μΈλ±μ¤ `(chat_id, created_at)` ν™•μΈ

### Phase 3: Service κ³„μΈµ κµ¬ν„

#### PersonalizationService μΈν„°νμ΄μ¤

```java
public interface PersonalizationService {

    /**
     * μ‚¬μ©μ μ„ νΈλ„ λ²΅ν„°λ¥Ό κ³„μ‚°ν•©λ‹λ‹¤.
     * μΊμ‹±λ©λ‹λ‹¤ (TTL: 24μ‹κ°„)
     *
     * @param chatId μ‚¬μ©μ chatId
     * @return μ„ νΈλ„ λ²΅ν„° (1024μ°¨μ›), ν”Όλ“λ°± λ¶€μ΅± μ‹ null
     */
    float[] calculateUserPreferenceVector(Long chatId);

    /**
     * κ²€μƒ‰ κ²°κ³Όλ¥Ό κ°μΈν™”λ μμ„λ΅ μ¬μ •λ ¬ν•©λ‹λ‹¤.
     *
     * @param results κΈ°μ΅΄ κ²€μƒ‰ κ²°κ³Ό
     * @param chatId μ‚¬μ©μ chatId
     * @return κ°μΈν™”λ κ²€μƒ‰ κ²°κ³Ό
     */
    List<BookSearchResponse> personalizedSearch(
        List<BookSearchResponse> results,
        Long chatId
    );

    /**
     * μ„ νΈλ„ λ²΅ν„° μΊμ‹λ¥Ό λ¬΄ν¨ν™”ν•©λ‹λ‹¤.
     *
     * @param chatId μ‚¬μ©μ chatId
     */
    void evictUserPreferenceCache(Long chatId);
}
```

**κµ¬ν„ ν•­λ©:**
- [ ] `calculateUserPreferenceVector()` κµ¬ν„
- [ ] `getLikedBookIds()` ν—¬νΌ λ©”μ„λ“ κµ¬ν„
  - [ ] GOOD ν•„ν„°λ§
  - [ ] μ¤‘λ³µ μ κ±° (`distinct()`)
  - [ ] μµμ‹  20κ° μ ν• (`limit(20)`)
- [ ] `calculateAverageVector()` λ²΅ν„° ν‰κ·  κ³„μ‚°
- [ ] μ½λ“ μ¤νƒ€νΈ μ²λ¦¬ (μµμ† 3κ° μ²΄ν¬)
- [ ] μΊμ‹± μ„¤μ • (`@Cacheable`)

**ν…μ¤νΈ ν•­λ©:**
- [ ] ν”Όλ“λ°± 3κ° μ΄μƒ β†’ μ„ νΈλ„ λ²΅ν„° λ°ν™
- [ ] ν”Όλ“λ°± 0κ° β†’ null λ°ν™
- [ ] ν”Όλ“λ°± 1-2κ° β†’ null λ°ν™
- [ ] μΊμ‹ λ™μ‘ ν™•μΈ

### Phase 4: μ ν‹Έλ¦¬ν‹° κµ¬ν„

#### VectorUtils

```java
public class VectorUtils {

    /**
     * λ‘ λ²΅ν„° κ°„μ μ½”μ‚¬μΈ μ μ‚¬λ„λ¥Ό κ³„μ‚°ν•©λ‹λ‹¤.
     *
     * @param v1 μ²« λ²μ§Έ λ²΅ν„°
     * @param v2 λ‘ λ²μ§Έ λ²΅ν„°
     * @return μ½”μ‚¬μΈ μ μ‚¬λ„ (-1.0 ~ 1.0)
     */
    public static double cosineSimilarity(float[] v1, float[] v2);
}
```

**κµ¬ν„ ν•­λ©:**
- [ ] λ‚΄μ  κ³„μ‚°
- [ ] λ²΅ν„° ν¬κΈ° κ³„μ‚°
- [ ] 0μΌλ΅ λ‚λ„κΈ° λ°©μ§€

**ν…μ¤νΈ ν•­λ©:**
- [ ] κ°™μ€ λ²΅ν„° β†’ 1.0
- [ ] λ°λ€ λ²΅ν„° β†’ -1.0
- [ ] μ§κ° λ²΅ν„° β†’ 0.0

### Phase 5: BookSearchService μ—°λ™

#### μΈν„°νμ΄μ¤ μμ •

```java
public interface BookSearchService {

    /**
     * λ„μ„λ¥Ό κ²€μƒ‰ν•κ³  κ°μΈν™”λ¥Ό μ μ©ν•©λ‹λ‹¤.
     *
     * @param query κ²€μƒ‰μ–΄
     * @param chatId μ‚¬μ©μ chatId (κ°μΈν™”μ©)
     * @param topK λ°ν™ν•  κ²°κ³Ό μ
     * @return κ°μΈν™”λ κ²€μƒ‰ κ²°κ³Ό
     */
    List<BookSearchResponse> searchBooks(String query, Long chatId, int topK);
}
```

**κµ¬ν„ ν•­λ©:**
- [ ] `PersonalizationService` μμ΅΄μ„± μ£Όμ…
- [ ] κΈ°μ΅΄ κ²€μƒ‰ κ²°κ³Ό νλ“ (`HybridSearchStrategy`)
- [ ] κ°μΈν™” μ¬μ •λ ¬ μ μ© (`PersonalizationService.personalizedSearch()`)
- [ ] κ°μΈν™” μ—¬λ¶€ λ΅κ·Έ κΈ°λ΅

### Phase 6: Telegram Bot UI μμ •

#### LibraryTelegramBot

**κµ¬ν„ ν•­λ©:**
- [ ] κ²€μƒ‰ κ²°κ³Ό λ©”μ‹μ§€μ— κ°μΈν™” μ•λ‚΄ μ¶”κ°€
  - [ ] κ°μΈν™” μ μ© μ‹: "β¨ κ°μΈν™”λ μ¶”μ²μ΄ μ μ©λμ—μµλ‹λ‹¤!"
  - [ ] κ°μΈν™” λ―Έμ μ© μ‹: "λ” μΆ‹μ€ μ¶”μ²μ„ μ„ν•΄ ν”Όλ“λ°±μ„ λ‚¨κ²¨μ£Όμ„Έμ”"
- [ ] κ°μΈν™” μ μ ν‘μ‹ (`π’ μ„ νΈλ„: XX.XX%`)
- [ ] μ½λ“ μ¤νƒ€νΈ μ•λ‚΄ λ©”μ‹μ§€

### Phase 7: μΊμ‹± μ„¤μ •

#### Redis μΊμ‹ μ„¤μ •

```properties
# application.properties
spring.cache.type=redis
spring.cache.redis.time-to-live=86400000  # 24μ‹κ°„
spring.cache.redis.cache-null-values=false
```

**λλ” Caffeine (μΈλ©”λ¨λ¦¬):**

```java
@Configuration
@EnableCaching
public class CacheConfig {

    @Bean
    public CacheManager cacheManager() {
        CaffeineCacheManager manager = new CaffeineCacheManager();
        manager.setCaffeine(Caffeine.newBuilder()
            .expireAfterWrite(24, TimeUnit.HOURS)
            .maximumSize(1000));
        return manager;
    }
}
```

**κµ¬ν„ ν•­λ©:**
- [ ] `@EnableCaching` μ„¤μ •
- [ ] CacheManager Bean λ“±λ΅
- [ ] TTL μ„¤μ • (24μ‹κ°„)
- [ ] μµλ€ μΊμ‹ μ μ„¤μ • (1000κ°)

### Phase 8: μµμ ν™” (μ„ νƒμ‚¬ν•­)

**μ„±λ¥ μµμ ν™”:**
- [ ] λΉ„λ™κΈ° μΊμ‹ λ¬΄ν¨ν™” (`@Async`, `@CacheEvict`)
- [ ] μ „μ²΄ μΈκΈ°λ„ λ²΅ν„° λ°°μΉ κ³„μ‚° (`@Scheduled`)
- [ ] λ°°μΉ μ²λ¦¬λ΅ DB λ¶€ν• κ°μ†

**λ¨λ‹ν„°λ§:**
- [ ] μΊμ‹ε‘½δΈ­η‡ λ¨λ‹ν„°λ§
- [ ] κ°μΈν™” μ μ©λ¥  μ¶”μ 
- [ ] ν‰κ·  μ‘λ‹µ μ‹κ°„ μΈ΅μ •

---

## 4. ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### 4.1 λ‹¨μ„ ν…μ¤νΈ

**VectorUtilsTest:**
| ν…μ¤νΈ μΌ€μ΄μ¤ | μ…λ ¥ | κΈ°λ€ μ¶λ ¥ |
|-------------|------|---------|
| κ°™μ€ λ²΅ν„° | [1,2,3], [1,2,3] | 1.0 |
| λ°λ€ λ²΅ν„° | [1,2,3], [-1,-2,-3] | -1.0 |
| μ§κ° λ²΅ν„° | [1,0,0], [0,1,0] | 0.0 |
| μ‹¤μ  μμ‹ | ν•΄λ¦¬ν¬ν„°, λ§λ²•μ‚¬ | > 0.8 |

**PersonalizationServiceTest:**
| ν…μ¤νΈ μΌ€μ΄μ¤ | μ΅°κ±΄ | κΈ°λ€ μ¶λ ¥ |
|-------------|------|---------|
| μ½λ“ μ¤νƒ€νΈ | ν”Όλ“λ°± 0κ° | null |
| ν”Όλ“λ°± λ¶€μ΅± | ν”Όλ“λ°± 2κ° | null |
| μ •μƒ κ³„μ‚° | ν”Όλ“λ°± 5κ° | float[1024] |
| μΊμ‹ λ™μ‘ | 2ν νΈμ¶ | 2νμ§Έλ” μΊμ‹ ννΈ |

### 4.2 ν†µν•© ν…μ¤νΈ

**μ‹λ‚λ¦¬μ¤ 1: μ½λ“ μ¤νƒ€νΈ μ‚¬μ©μ**

```
[Given]
- chatId: 99999 (μ‹ κ· μ‚¬μ©μ)
- ν”Όλ“λ°±: 0κ°

[When]
- κ²€μƒ‰μ–΄: "μλ°”"

[Then]
- κ°μΈν™” λ―Έμ μ©
- κΈ°μ΅΄ κ²€μƒ‰ κ²°κ³Ό κ·Έλ€λ΅
- μ•λ‚΄ λ©”μ‹μ§€: "λ” μΆ‹μ€ μ¶”μ²μ„ μ„ν•΄ ν”Όλ“λ°±μ„ λ‚¨κ²¨μ£Όμ„Έμ”"
```

**μ‹λ‚λ¦¬μ¤ 2: κ°μΈν™” μ μ© μ‚¬μ©μ**

```
[Given]
- chatId: 12345
- ν”Όλ“λ°±: 5κ° (μ›Ή κ°λ° κ΄€λ ¨ λ„μ„λ“¤)

[When]
- κ²€μƒ‰μ–΄: "μλ°”"

[Then]
- κ°μΈν™” μ μ©λ¨
- μ¤ν”„λ§, μ›Ή ν”„λ μ„μ›ν¬ κ΄€λ ¨ λ„μ„ μƒμ„ λ…Έμ¶
- μ•λ‚΄ λ©”μ‹μ§€: "β¨ κ°μΈν™”λ μ¶”μ²μ΄ μ μ©λμ—μµλ‹λ‹¤!"
- κ° λ„μ„μ— "π’ μ„ νΈλ„: XX.XX%" ν‘μ‹
```

**μ‹λ‚λ¦¬μ¤ 3: μΊμ‹ λ™μ‘**

```
[Given]
- chatId: 12345
- 1ν κ²€μƒ‰ μ™„λ£ (μ„ νΈλ„ λ²΅ν„° μΊμ‹±λ¨)

[When]
- 2ν κ²€μƒ‰ (κ°™μ€ chatId)

[Then]
- DB μ΅°ν μ—†μ΄ μΊμ‹μ—μ„ μ„ νΈλ„ λ²΅ν„° λ°ν™
- μ‘λ‹µ μ‹κ°„ λ‹¨μ¶• (< 10ms)
```

### 4.3 μ‚¬μ©μ Acceptance ν…μ¤νΈ

**ν…μ¤νΈ μ μ°¨:**

1. **μ‹ κ· μ‚¬μ©μλ΅ μ‹μ‘**
   - Bot μ‹μ‘ (`/start`)
   - κ²€μƒ‰μ–΄ μ…λ ¥: "ννƒ€μ§€"
   - ν™•μΈ: μΌλ° κ²€μƒ‰ κ²°κ³Όλ§ ν‘μ‹

2. **ν”Όλ“λ°± 3κ° λ‚¨κΈ°κΈ°**
   - κ²€μƒ‰ κ²°κ³Όμ—μ„ 3κ° λ„μ„μ— π‘ ν΄λ¦­
   - ν™•μΈ: "π‰ κ°μΈν™”λ μ¶”μ²μ΄ μ‹μ‘λμ—μµλ‹λ‹¤!" λ©”μ‹μ§€

3. **κ°μΈν™” ν™•μΈ**
   - κ°™μ€ κ²€μƒ‰μ–΄λ΅ μ¬κ²€μƒ‰: "ννƒ€μ§€"
   - ν™•μΈ: μ΄μ „μ— μΆ‹μ•„ν• λ„μ„μ™€ μ μ‚¬ν• λ„μ„ μƒμ„ λ…Έμ¶
   - ν™•μΈ: "β¨ κ°μΈν™”λ μ¶”μ²" λ©”μ‹μ§€

4. **μ„ νΈλ„ λ³€κ²½**
   - λ‹¤λ¥Έ μ£Όμ  κ²€μƒ‰: "μ£Όμ‹ ν¬μ"
   - π‘ ν”Όλ“λ°± 5ν μ΄μƒ λ‚¨κΈ°κΈ°
   - ν™•μΈ: μ£Όμ‹ κ΄€λ ¨ λ„μ„λ„ μ¶”μ²μ— ν¬ν•¨

---

## 5. μ„±λ¥ κΈ°μ¤€ (KPI)

### 5.1 μ„±λ¥ λ©ν‘

| μ§€ν‘ | λ©ν‘ | μΈ΅μ • λ°©λ²• |
|-----|------|---------|
| ν‰κ·  μ‘λ‹µ μ‹κ°„ | < 150ms | Timer λ©”νΈλ¦­ |
| μΊμ‹ε‘½δΈ­η‡ | > 70% | Cache stats |
| κ°μΈν™” μ μ©λ¥  | > 50% | Cold start vs Applied |
| DB μ΅°ν μ | κ²€μƒ‰λ‹Ή < 3ν | DB slow query log |

### 5.2 λ¨λ‹ν„°λ§ λ€μƒ

**μ‹μ¤ν… λ©”νΈλ¦­:**
- CPU μ‚¬μ©λ¥ 
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰
- Redis λ©”λ¨λ¦¬ μ‚¬μ©λ‰

**λΉ„μ¦λ‹μ¤ λ©”νΈλ¦­:**
- μΌμΌ κ²€μƒ‰ μ
- κ°μΈν™” μ μ© λΉ„μ¨
- ν”Όλ“λ°± μμ§‘λ¥ 

**μ‚¬μ©μ λ©”νΈλ¦­:**
- ν‰κ·  κ²€μƒ‰ κ²°κ³Ό λ§μ΅±λ„ (GOOD ν”Όλ“λ°± λΉ„μ¨)
- μ¬κ²€μƒ‰λ¥  (κ°™μ€ κ²€μƒ‰μ–΄ λ°λ³µ)
- μ΄νƒλ¥  (ν”Όλ“λ°± μ—†μ΄ μ΄νƒ)

---

## 6. μ΄μ κ°€μ΄λ“

### 6.1 μΊμ‹ κ΄€λ¦¬

**μΊμ‹ μ΄κΈ°ν™”:**
```bash
# Redis CLI
redis-cli FLUSHDB

# λλ” νΉμ • ν‚¤λ§ μ‚­μ 
redis-cli DEL "userPreferenceVectors::12345"
```

**μΊμ¤ν¬ μ‚¬μ΄μ¦ λ¨λ‹ν„°λ§:**
```bash
# Redis λ©”λ¨λ¦¬ μ‚¬μ©λ‰ ν™•μΈ
redis-cli INFO memory
```

### 6.2 λ°μ΄ν„° μ •λ¦¬

**μ¤λλ ν”Όλ“λ°± μ‚­μ :**
```sql
-- 6κ°μ›” μ΄μƒ ν”Όλ“λ°± μ‚­μ 
DELETE FROM search_feedbacks
WHERE created_at < NOW() - INTERVAL '6 months';
```

**λλ” λ°°μΉλ΅:**
```java
@Scheduled(cron = "0 0 2 1 * ?")  // λ§¤μ›” 1μΌ μƒλ²½ 2μ‹
public void cleanupOldFeedbacks() {
    LocalDateTime cutoff = LocalDateTime.now().minusMonths(6);
    int deleted = feedbackRepository.deleteByCreatedAtBefore(cutoff);
    log.info("Cleaned up old feedbacks: {} records", deleted);
}
```

### 6.3 μ¥μ•  λ€μ‘

**μ¥μ•  μƒν™©:** Redis λ‹¤μ΄

**λ€μ‘:**
1. μΊμ‹ μ‚¬μ© μ¤‘μ§€ (fallback)
2. λ§¤λ² μ„ νΈλ„ λ²΅ν„° κ³„μ‚° (μ„±λ¥ μ €ν• ν—μ©)
3. Redis λ³µκµ¬ ν›„ μΊμ‹ μ¬κµ¬μ¶•

```java
@Cacheable(
    value = "userPreferenceVectors",
    key = "#chatId",
    unless = "#result == null"
)
// Fallback: Redis λ‹¤μ΄ μ‹ μμ™Έ λ¬΄μ‹ and κΈ°μ΅΄ κ²€μƒ‰λ§ λ°ν™
public float[] calculateUserPreferenceVector(Long chatId) {
    try {
        // ... κ³„μ‚° λ΅μ§
    } catch (Exception e) {
        log.error("Failed to calculate preference vector, skipping personalization", e);
        return null;
    }
}
```

---

## ν•™μµ μ”μ•½

### μ „μ²΄ κµ¬ν„ νλ¦„

```
Phase 1: κΈ°μ΄ μ΄λ΅ 
  β””β”€ λ²΅ν„° μ„λ² λ”©, μ½”μ‚¬μΈ μ μ‚¬λ„ μ΄ν•΄

Phase 2: λ°μ΄ν„° κ³„μΈµ
  β””β”€ BookRepository, FeedbackRepository ν™•μ¥

Phase 3: μ„λΉ„μ¤ κ³„μΈµ
  β””β”€ PersonalizationService, VectorUtils κµ¬ν„

Phase 4: κ²€μƒ‰ μ—°λ™
  β””β”€ BookSearchServiceμ— κ°μΈν™” ν†µν•©

Phase 5: UI κ°μ„ 
  β””β”€ Telegram Botμ— κ°μΈν™” ν‘μ‹

Phase 6: μµμ ν™”
  β””β”€ μΊμ‹±, λΉ„λ™κΈ°, λ°°μΉ μ²λ¦¬

Phase 7: ν…μ¤νΈ
  β””β”€ λ‹¨μ„, ν†µν•©, acceptance ν…μ¤νΈ

Phase 8: μ΄μ
  β””β”€ λ¨λ‹ν„°λ§, μ¥μ•  λ€μ‘
```

### μ™„λ£ κΈ°μ¤€

**μµμ† κΈ°λ¥ (MVP):**
- [ ] μ‚¬μ©μλ³„ μ„ νΈλ„ λ²΅ν„° κ³„μ‚° κ°€λ¥
- [ ] κ²€μƒ‰ κ²°κ³Ό κ°μΈν™” μ¬μ •λ ¬ λ™μ‘
- [ ] μ½λ“ μ¤νƒ€νΈ μ‚¬μ©μ μ²λ¦¬
- [ ] κΈ°λ³Έ λ‹¨μ„ ν…μ¤νΈ ν†µκ³Ό

**μ΄μ μ¤€λΉ„ (Production Ready):**
- [ ] μΊμ‹± μ μ© (Redis λλ” Caffeine)
- [ ] μ„±λ¥ κΈ°μ¤€ λ‹¬μ„± (< 150ms)
- [ ] λ¨λ‹ν„°λ§ μ„¤μ • μ™„λ£
- [ ] μ¥μ•  λ€μ‘ ν”„λ΅μ„Έμ¤ ν™•λ¦½

---

## λ‹¤μ λ‹¨κ³„

**Step 6 μ™„λ£!** π‰

κ°μΈν™” μ¶”μ² μ‹μ¤ν… κµ¬μ¶•μ„ μ™„λ£ν–μµλ‹λ‹¤. λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰ν•  μ μμµλ‹λ‹¤:

- **[Step 7: MCP ν†µν•©](../step-7/)** - Model Context ProtocolμΌλ΅ μ™Έλ¶€ AI μ„λΉ„μ¤ μ—°λ™
- **[μ„±λ¥ μµμ ν™” μ‹¬ν™”](../../docs/step-4/)** - λ€κ·λ¨ λ°μ΄ν„° μ²λ¦¬λ¥Ό μ„ν• μµμ ν™” κΈ°λ²•
- **[A/B ν…μ¤νΈ](../../docs/step-5/)** - κ°μΈν™” ν¨κ³Ό κ²€μ¦

---

**μ°Έκ³  μλ£:**
- [Vector Database Best Practices](https://www.pinecone.io/learn/vector-database/)
- [Recommendation System Design](https://arxiv.org/abs/2106.05598)
- [System Design for Personalization](https://www.engraved.blog/building-a-production-ready-recommender-system/)
