# Phase 4: ì½œë“œ ìŠ¤íƒ€íŠ¸ì™€ ì„±ëŠ¥ ìµœì í™”

## í•™ìŠµ ê°œìš”

ê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œì˜ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ ë°œìƒí•˜ëŠ” **ì œì•½ì‚¬í•­ê³¼ í•´ê²° ë°©ì•ˆ**ì„ í•™ìŠµí•©ë‹ˆë‹¤. ì½œë“œ ìŠ¤íƒ€íŠ¸ ë¬¸ì œ, ì„±ëŠ¥ ë³‘ëª©, ìµëª… ì‚¬ìš©ì í™˜ê²½ì˜ í•œê³„ ë“±ì„ ë¶„ì„í•˜ê³  ì´ë¥¼ ê·¹ë³µí•˜ëŠ” ì „ëµì„ ì„¤ê³„í•©ë‹ˆë‹¤.

## í•™ìŠµ ëª©í‘œ

1. **ì½œë“œ ìŠ¤íƒ€íŠ¸(Cold Start) ë¬¸ì œ ì´í•´**
   - ì‹ ê·œ ì‚¬ìš©ìì˜ ê°œì¸í™” ë¶ˆê°€ ë¬¸ì œ
   - ì „ì²´ ì¸ê¸°ë„ ë°˜ì˜ ì „ëµ
   - í”¼ë“œë°± ìˆ˜ì§‘ ìœ ë„ ë°©ë²•

2. **ì„±ëŠ¥ ìµœì í™” ì „ëµ**
   - ì„ í˜¸ë„ ë²¡í„° ìºì‹± (Redis)
   - ë¹„ë™ê¸° ê³„ì‚°ìœ¼ë¡œ ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•
   - ë°°ì¹˜ ì²˜ë¦¬ë¡œ DB ë¶€í•˜ ê°ì†Œ

3. **ìµëª… ì‚¬ìš©ì í™˜ê²½ ì œì•½ì‚¬í•­**
   - Telegram chatIdì˜ í•œê³„ì™€ í•´ê²°
   - ì„¸ì…˜ ê¸°ë°˜ ê°œì¸í™”ì˜ ë²”ìœ„ ì´í•´
   - ë°ì´í„° ë³´í˜¸ì™€ ì •ë¦¬ ì •ì±…

---

## 1. ì½œë“œ ìŠ¤íƒ€íŠ¸(Cold Start) ë¬¸ì œ

### 1.1 ë¬¸ì œ ì •ì˜

**ì½œë“œ ìŠ¤íƒ€íŠ¸(Cold Start):** ì‹ ê·œ ì‚¬ìš©ìì—ê²Œ ê°œì¸í™”ëœ ì¶”ì²œì„ ì œê³µí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œ

```
ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡
    â†“
í”¼ë“œë°± ê¸°ë¡: 0ê°œ
    â†“
ì„ í˜¸ë„ ë²¡í„°: null
    â†“
ê°œì¸í™”: ë¶ˆê°€ëŠ¥ (ì¼ë°˜ ê²€ìƒ‰ ê²°ê³¼ë§Œ ì œê³µ)
```

### 1.2 í•´ê²° ì „ëµ 1: ìµœì†Œ í”¼ë“œë°± ìˆ˜ ìš”êµ¬

**í˜„ì¬ ì ‘ê·¼:**
```java
if (likedBookIds.size() < 3) {
    // ê°œì¸í™” ë¯¸ì ìš©
    return null;
}
```

**ì¥ì :**
- ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì„ í˜¸ë„ ë²¡í„° ìƒì„±
- ë…¸ì´ì¦ˆ ê°ì†Œ

**ë‹¨ì :**
- 1-2ê°œ í”¼ë“œë°± ì‚¬ìš©ìì—ê²Œ ê°œì¸í™” ë¯¸ì œê³µ
- í”¼ë“œë°± ìˆ˜ì§‘ ìœ ë„ í•„ìš”

### 1.3 í•´ê²° ì „ëµ 2: ì „ì²´ ì¸ê¸°ë„ ë°˜ì˜

**ì•„ì´ë””ì–´:** ì‹ ê·œ ì‚¬ìš©ìì—ê²Œ ì „ì²´ ì¸ê¸° ë„ì„œ ì¶”ì²œ

```java
public float[] calculateUserPreferenceVector(Long chatId) {
    List<Long> likedBookIds = getLikedBookIds(chatId);

    // [ì½œë“œ ìŠ¤íƒ€íŠ¸ ëŒ€ì•ˆ] ì „ì²´ ì¸ê¸° ë„ì„œì˜ í‰ê·  ë²¡í„° ì‚¬ìš©
    if (likedBookIds.size() < 3) {
        log.info("Cold start: using global popularity vector");
        return getGlobalPopularityVector();
    }

    // ... ê¸°ì¡´ ë¡œì§
}

/**
 * ì „ì²´ ì‚¬ìš©ìì˜ GOOD í”¼ë“œë°±ì´ ë§ì€ ë„ì„œë“¤ì˜ í‰ê·  ë²¡í„°
 */
private float[] getGlobalPopularityVector() {
    // ìºì‹±ëœ ì „ì²´ ì¸ê¸° ë²¡í„° ë°˜í™˜
    return cachedGlobalPopularityVector;
}
```

**ì „ì²´ ì¸ê¸° ë²¡í„° ê³„ì‚°:**
```java
/**
 * ì „ì²´ ì¸ê¸° ë²¡í„°ë¥¼ ê³„ì‚°í•˜ê³  ìºì‹±í•©ë‹ˆë‹¤.
 * ì£¼ê¸°ì ìœ¼ë¡œ (ì˜ˆ: ë§¤ì¼ ìƒˆë²½) ê°±ì‹ í•©ë‹ˆë‹¤.
 */
@Scheduled(cron = "0 0 3 * * ?")  // ë§¤ì¼ ìƒˆë²½ 3ì‹œ
public void updateGlobalPopularityVector() {
    log.info("Updating global popularity vector...");

    // GOOD í”¼ë“œë°±ì´ ë§ì€ ìƒìœ„ 20ê°œ ë„ì„œ ì¶”ì¶œ
    List<Long> popularBookIds = feedbackRepository
        .findMostPopularBooks(FeedbackType.GOOD, PageRequest.of(0, 20));

    // ì„ë² ë”© ì¡°íšŒ ë° í‰ê·  ê³„ì‚°
    List<float[]> embeddings = bookRepository.findEmbeddingsByIds(popularBookIds);
    float[] globalVector = calculateAverageVector(embeddings);

    // ìºì‹± (24ì‹œê°„)
    cacheManager.put("globalPopularity", "vector", globalVector);

    log.info("Global popularity vector updated: {} books", popularBookIds.size());
}
```

### 1.4 í•´ê²° ì „ëµ 3: í”¼ë“œë°± ìˆ˜ì§‘ ìœ ë„

**ì‚¬ìš©ì ì•ˆë‚´ ë©”ì‹œì§€:**
```
ğŸ“Š ë” ì¢‹ì€ ì¶”ì²œì„ ìœ„í•´ í”¼ë“œë°±ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!

ê²€ìƒ‰ ê²°ê³¼ì— ğŸ‘ ë˜ëŠ” ğŸ‘ ë²„íŠ¼ìœ¼ë¡œ í”¼ë“œë°±ì„ ì£¼ì‹œë©´,
ì‚¬ìš©ìë‹˜ì˜ ì·¨í–¥ì„ ë¶„ì„í•˜ì—¬ ë” ë‚˜ì€ ì¶”ì²œì„ ì œê³µí•´ ë“œë¦½ë‹ˆë‹¤.

í˜„ì¬ í”¼ë“œë°±: 2ê°œ (3ê°œë¶€í„° ê°œì¸í™” ì‹œì‘)
```

**ë³´ìƒ ì‹œìŠ¤í…œ (ì„ íƒì‚¬í•­):**
```java
// í”¼ë“œë°± 3ê°œ ë‹¬ì„± ì‹œ íŠ¹ë³„ ë©”ì‹œì§€
if (feedbackCount == 3) {
    sendMessage("ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ê°œì¸í™”ëœ ì¶”ì²œ ì„œë¹„ìŠ¤ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!");
}
```

---

## 2. ì„±ëŠ¥ ìµœì í™”

### 2.1 ë¬¸ì œ ë¶„ì„

**ì„±ëŠ¥ ë³‘ëª© ì§€ì :**

```
ê²€ìƒ‰ ìš”ì²­
    â†“
[ì„ í˜¸ë„ ë²¡í„° ê³„ì‚°] â† ë³‘ëª© 1: DB ì¡°íšŒ + í‰ê·  ê³„ì‚° (100-200ms)
    â†“
[ê¸°ì¡´ ê²€ìƒ‰]       â† ë³‘ëª© 2: í‚¤ì›Œë“œ + ë²¡í„° ê²€ìƒ‰ (50-100ms)
    â†“
[ìœ ì‚¬ë„ ê³„ì‚°]      â† ë³‘ëª© 3: ê° ë„ì„œë³„ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ (10-50ms)
    â†“
[ì¬ì •ë ¬]
    â†“
ì‘ë‹µ (ì´ 160-350ms)
```

**ëª©í‘œ:** ì‘ë‹µ ì‹œê°„ 100ms ì´ë‚´

### 2.2 ìµœì í™” 1: ì„ í˜¸ë„ ë²¡í„° ìºì‹±

**Redis ìºì‹±:**
```java
@Service
public class PersonalizationService {

    // Redisì— 24ì‹œê°„ ìºì‹±
    @Cacheable(
        value = "userPreferenceVectors",
        key = "#chatId",
        unless = "#result == null"
    )
    public float[] calculateUserPreferenceVector(Long chatId) {
        // ... ê³„ì‚° ë¡œì§
    }

    // ìƒˆ í”¼ë“œë°± ì‹œ ìºì‹œ ë¬´íš¨í™”
    @CacheEvict(value = "userPreferenceVectors", key = "#feedback.chatId")
    public void recordFeedback(FeedbackRequest feedback) {
        // ... ì €ì¥ ë¡œì§
    }
}
```

**ìºì‹œ í‚¤ êµ¬ì¡°:**
```
userPreferenceVectors::12345  â†’ float[1024]
userPreferenceVectors::67890  â†’ float[1024]
...
```

**ìºì‹± íš¨ê³¼:**
- 1íšŒ ê³„ì‚°: 150ms
- ìºì‹œ íˆíŠ¸: <5ms
- **30ë°° í–¥ìƒ**

### 2.3 ìµœì í™” 2: ë¹„ë™ê¸° ê³„ì‚°

**ë¬¸ì œ:** í”¼ë“œë°± ì €ì¥ ì‹œ ì¦‰ì‹œ ìºì‹œ ë¬´íš¨í™”í•˜ë©´ ê²€ìƒ‰ ì§€ì—°

**í•´ê²°:** ë¹„ë™ê¸°ë¡œ ë°±ê·¸ë¼ìš´ë“œ ê³„ì‚°

```java
@Service
public class PersonalizationService {

    @Async
    @CacheEvict(value = "userPreferenceVectors", key = "#chatId")
    public void evictUserPreferenceCacheAsync(Long chatId) {
        // ë¹„ë™ê¸°ë¡œ ìºì‹œ ë¬´íš¨í™” (ë‹¤ìŒ ìš”ì²­ ì‹œ ì¬ê³„ì‚°)
        log.debug("Cache evicted asynchronously for chatId: {}",
            PrivacyUtil.maskChatId(chatId));
    }

    // í”¼ë“œë°± ì €ì¥ ì‹œ í˜¸ì¶œ
    public void recordFeedback(FeedbackRequest feedback) {
        // 1. DB ì €ì¥ (ë™ê¸°)
        feedbackRepository.save(feedback);

        // 2. ìºì‹œ ë¬´íš¨í™” (ë¹„ë™ê¸°)
        evictUserPreferenceCacheAsync(feedback.getChatId());

        // 3. ì¦‰ì‹œ ì‘ë‹µ (ì§€ì—° ì—†ìŒ)
    }
}
```

**ë¹„ë™ê¸° ì„¤ì •:**
```java
@Configuration
@EnableAsync
public class AsyncConfig {

    @Bean(name = "taskExecutor")
    public Executor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);
        executor.setMaxPoolSize(10);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("personalization-async-");
        executor.initialize();
        return executor;
    }
}
```

### 2.4 ìµœì í™” 3: ë°°ì¹˜ ì²˜ë¦¬

**ë¬¸ì œ:** ë§¤ì¼ ìƒˆë²½ ì „ì²´ ì¸ê¸° ë²¡í„° ê³„ì‚° ì‹œ DB ë¶€í•˜

**í•´ê²°:** ë°°ì¹˜ë¡œ ë¶„í•  ì²˜ë¦¬

```java
@Component
public class GlobalPopularityUpdater {

    @Scheduled(cron = "0 0 3 * * ?")
    public void updateGlobalPopularityVector() {
        int batchSize = 100;
        int offset = 0;

        float[] sumVector = null;
        int totalCount = 0;

        while (true) {
            // ë°°ì¹˜ë¡œ ì¡°íšŒ
            List<float[]> batch = bookRepository
                .findEmbeddingsByGoodFeedbackBatch(offset, batchSize);

            if (batch.isEmpty()) break;

            // ëˆ„ì  í•©ê³„
            for (float[] embedding : batch) {
                if (sumVector == null) {
                    sumVector = embedding.clone();
                } else {
                    for (int i = 0; i < embedding.length; i++) {
                        sumVector[i] += embedding[i];
                    }
                }
                totalCount++;
            }

            offset += batchSize;
        }

        // í‰ê·  ê³„ì‚° ë° ìºì‹±
        if (totalCount > 0) {
            for (int i = 0; i < sumVector.length; i++) {
                sumVector[i] /= totalCount;
            }
            cacheManager.put("globalPopularity", "vector", sumVector);
        }
    }
}
```

---

## 3. ìµëª… ì‚¬ìš©ì í™˜ê²½ ì œì•½ì‚¬í•­

### 3.1 Telegram chatIdì˜ í•œê³„

**ë¬¸ì œ 1: Bot ì‚­ì œ í›„ ì¬ì„¤ì¹˜ â†’ chatId ë³€ê²½**

```
ì‚¬ìš©ì A: chatId = 12345
    â†’ í”¼ë“œë°± 20ê°œç§¯ç´¯
    â†’ ì„ í˜¸ë„ ë²¡í„° ì™„ì„±

[Bot ì‚­ì œ í›„ ì¬ì„¤ì¹˜]

ì‚¬ìš©ì A: chatId = 67890 (ë³€ê²½!)
    â†’ í”¼ë“œë°± 0ê°œ
    â†’ ì½œë“œ ìŠ¤íƒ€íŠ¸ ë‹¤ì‹œ
```

**í•´ê²°: ë‹¨ê¸° ì„¸ì…˜ìœ¼ë¡œ ì·¨ê¸‰**

```java
// 6ê°œì›” ì´ìƒ í”¼ë“œë°±ì´ ì—†ëŠ” ì‚¬ìš©ì ë°ì´í„° ì •ë¦¬
@Scheduled(cron = "0 0 2 1 * ?")  // ë§¤ì›” 1ì¼ ìƒˆë²½ 2ì‹œ
public void cleanupOldFeedbacks() {
    LocalDateTime cutoff = LocalDateTime.now().minusMonths(6);

    int deleted = feedbackRepository.deleteByCreatedAtBefore(cutoff);

    log.info("Cleaned up old feedbacks: {} records", deleted);
}
```

**ë¬¸ì œ 2: ì—¬ëŸ¬ ê¸°ê¸°ì—ì„œ Bot ì‚¬ìš©**

```
ì‚¬ìš©ì A: ìŠ¤ë§ˆíŠ¸í° (chatId=12345)
ì‚¬ìš©ì A: íƒœë¸”ë¦¿   (chatId=12345)  â† ê°™ì€ chatId
ì‚¬ìš©ì A: ë°ìŠ¤í¬í†± (chatId=12345)  â† ê°™ì€ chatId
```

**ì¥ì :** ìë™ìœ¼ë¡œ ë™ê¸°í™”ë¨ (Telegram ê³„ì • ì—°ë™)

**ë‹¨ì :** ê°€ì¡± ê³µìœ  ê³„ì •ì€ ì„ì„

### 3.2 ë°ì´í„° ë³´í˜¸

**PII(ê°œì¸ ì‹ë³„ ì •ë³´) ì²˜ë¦¬:**

```java
public class PrivacyUtil {

    private static final String SALT = "ai-library-salt-2024";

    /**
     * chatIdë¥¼ í•´ì‹±í•˜ì—¬ ë¡œê·¸ì— ì•ˆì „í•˜ê²Œ í‘œì‹œ
     */
    public static String hashChatId(Long chatId) {
        try {
            String input = chatId + SALT;
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            byte[] hash = digest.digest(input.getBytes(StandardCharsets.UTF_8));
            return Base64.getEncoder().encodeToString(hash);
        } catch (NoSuchAlgorithmException e) {
            return "HASH_ERROR";
        }
    }

    /**
     * chatIdë¥¼ ë§ˆìŠ¤í‚¹í•˜ì—¬ ë¡œê·¸ì— í‘œì‹œ
     */
    public static String maskChatId(Long chatId) {
        String chatIdStr = chatId.toString();
        if (chatIdStr.length() <= 3) {
            return "***";
        }
        return chatIdStr.substring(0, 3) + "***";
    }
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```java
log.info("Processing feedback for chatId: {}",
    PrivacyUtil.maskChatId(chatId));  // "123***"

log.info("Feedback stored for user: {}",
    PrivacyUtil.hashChatId(chatId));  // "a3f5b8c9d2e1..."
```

### 3.3 ì„¸ì…˜ ê¸°ë°˜ ê°œì¸í™”ì˜ ë²”ìœ„

**ê°€ì •:** ì‚¬ìš©ìëŠ” Telegram Botì„ **ë‹¨ê¸°ê°„** ì‚¬ìš©

**í˜„ì‹¤:**
- ëŒ€ë¶€ë¶„ ì‚¬ìš©ìëŠ” 1-2ê°œì›” ë‚´ì— í”¼ë“œë°± 3ê°œ ì´ìƒ ë‚¨ê¹€
- 6ê°œì›” ì´ìƒ ì¥ê¸° ì‚¬ìš©ìëŠ” ì†Œìˆ˜

**ì „ëµ:**
```
1. ë‹¨ê¸° ê°œì¸í™” (1-3ê°œì›”)
   - ìµœê·¼ 20ê°œ í”¼ë“œë°± ë°˜ì˜
   - ìºì‹±: 24ì‹œê°„

2. ë°ì´í„° ì •ë¦¬ (6ê°œì›”)
   - ì˜¤ë˜ëœ í”¼ë“œë°± ì‚­ì œ
   - í”„ë¼ì´ë²„ì‹œ ë³´í˜¸

3. ì „ì²´ ì¸ê¸°ë„ (ì¥ê¸°)
   - ëª¨ë“  ì‚¬ìš©ì ë°ì´í„° ë°˜ì˜
   - ì‹ ê·œ ì‚¬ìš©ì ì¶”ì²œ
```

---

## 4. ëª¨ë‹ˆí„°ë§

### 4.1 ìºì‹œå‘½ä¸­ç‡ ëª¨ë‹ˆí„°ë§

```java
@Component
public class CacheMetrics {

    private final MeterRegistry meterRegistry;
    private final CacheManager cacheManager;

    @Scheduled(fixedRate = 60000)  // 1ë¶„ë§ˆë‹¤
    public void reportCacheStats() {
        Cache cache = cacheManager.getCache("userPreferenceVectors");

        if (cache instanceof CaffeineCache) {
            CaffeineCache caffeineCache = (CaffeineCache) cache;
            com.github.benmanes.caffeine.cache.Cache<Object, Object> nativeCache =
                caffeineCache.getNativeCache();

            CacheStats stats = nativeCache.stats();

            // ìºì‹œå‘½ä¸­ç‡ ê¸°ë¡
            Gauge.builder("cache.hit_ratio", stats, s -> s.hitRate())
                .register(meterRegistry);

            log.info("Cache stats: hitRate={}, hitCount={}, missCount={}",
                stats.hitRate(), stats.hitCount(), stats.missCount());
        }
    }
}
```

### 4.2 ì½œë“œ ìŠ¤íƒ€íŠ¸ ì‚¬ìš©ì ì¶”ì 

```java
@Component
public class ColdStartMetrics {

    private final MeterRegistry meterRegistry;

    public void recordColdStart(Long chatId) {
        Counter.builder("personalization.cold_start")
            .register(meterRegistry)
            .increment();
    }

    public void recordPersonalizationApplied(Long chatId) {
        Counter.builder("personalization.applied")
            .register(meterRegistry)
            .increment();
    }
}
```

### 4.3 í‰ê·  ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§

```java
@Around("execution(* com.nhnacademy.library..*.personalizedSearch(..))")
public Object measurePersonalizationTime(ProceedingJoinPoint joinPoint) throws Throwable {
    long start = System.currentTimeMillis();

    Object result = joinPoint.proceed();

    long duration = System.currentTimeMillis() - start;

    Timer.builder("personalization.duration")
        .register(meterRegistry)
        .record(duration, TimeUnit.MILLISECONDS);

    return result;
}
```

---

## 5. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 5.1 ìºì‹œê°€ ë„ˆë¬´ ìì£¼ ë§Œë£Œë¨

**ì¦ìƒ:**
```
ìºì‹œå‘½ä¸­ç‡: 10% (ë„ˆë¬´ ë‚®ìŒ)
```

**ì›ì¸:**
- í”¼ë“œë°± ì €ì¥ ì‹œë§ˆë‹¤ ìºì‹œ ë¬´íš¨í™”
- ìì£¼ í”¼ë“œë°± ë‚¨ê¸°ëŠ” ì‚¬ìš©ìëŠ” ìºì‹œ íš¨ê³¼ ì—†ìŒ

**í•´ê²°:**
```java
// ìºì‹œ ë§Œë£Œ ì‹œê°„ ì—°ì¥ (24ì‹œê°„ â†’ 7ì¼)
@Cacheable(value = "userPreferenceVectors",
    key = "#chatId",
    unless = "#result == null")
@CacheEvict(value = "userPreferenceVectors",
    key = "#chatId",
    allEntries = false)  // ì œê±°: í”¼ë“œë°± ì‹œë§ˆë‹¤ ë¬´íš¨í™”
```

**ëŒ€ì‹ :** ì£¼ê¸°ì  ë°°ì¹˜ë¡œ ê°±ì‹ 

```java
@Scheduled(cron = "0 0 */6 * * ?")  // 6ì‹œê°„ë§ˆë‹¤
public void refreshAllUserPreferenceVectors() {
    // í™œì„± ì‚¬ìš©ì(ìµœê·¼ 7ì¼ í”¼ë“œë°±)ì˜ ì„ í˜¸ë„ ë²¡í„° ê°±ì‹ 
}
```

### 5.2 Redis ë©”ëª¨ë¦¬ ë¶€ì¡±

**ì¦ìƒ:**
```
Redis OOM error
```

**í•´ê²°:**
```properties
# application.properties
spring.cache.redis.time-to-live=604800000  # 7ì¼ (ê¸°ì¡´ 24ì‹œê°„)
spring.cache.redis.cache-null-values=false  # null ê°’ ìºì‹œ ì•ˆ í•¨
```

**ë˜ëŠ” ìµœëŒ€ ìºì‹œ ìˆ˜ ì œí•œ:**
```java
@Bean
public RedisCacheConfiguration cacheConfiguration() {
    return RedisCacheConfiguration.defaultCacheConfig()
        .entryTtl(Duration.ofDays(7))
        .disableCachingNullValues()
        .serializeKeysWith(RedisSerializationContext.SerializationPair
            .fromSerializer(new StringRedisSerializer()))
        .serializeValuesWith(RedisSerializationContext.SerializationPair
            .fromSerializer(new GenericJackson2JsonRedisSerializer()));
}
```

### 5.3 ì½œë“œ ìŠ¤íƒ€íŠ¸ ì‚¬ìš©ì ì´íƒˆ

**ì¦ìƒ:**
- ì‹ ê·œ ì‚¬ìš©ìì˜ í”¼ë“œë°± ìˆ˜ì§‘ìœ¨: 5% (ë„ˆë¬´ ë‚®ìŒ)

**í•´ê²°:**
1. **ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€**
   ```
   ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”! AI ë„ì„œ ì¶”ì²œ ë´‡ì…ë‹ˆë‹¤.

   ë” ì¢‹ì€ ì¶”ì²œì„ ìœ„í•´ ì²« 3ê°œì˜ í”¼ë“œë°±ì„ ë¶€íƒë“œë ¤ìš”!
   (ğŸ‘ ì¢‹ì•˜ìŒ / ğŸ‘ ë³„ë¡œì˜€ìŒ)

   3ê°œë¥¼ ì™„ë£Œí•˜ì‹œë©´ ê°œì¸í™”ëœ ì¶”ì²œì´ ì‹œì‘ë©ë‹ˆë‹¤!
   ```

2. **ì˜¨ë³´ë”© ê°€ì´ë“œ**
   ```
   /start ëª…ë ¹ì–´ë¡œ íŠœí† ë¦¬ì–¼ ì‹œì‘
   ```

3. **ì¸ì„¼í‹°ë¸Œ**
   ```
   ğŸ í”¼ë“œë°± 10ê°œ ì™„ë£Œ ì‹œ "ì¶”ì²œ ë„ì„œ ëª©ë¡" PDF ì œê³µ
   ```

---

## í•™ìŠµ ìš”ì•½

### í•µì‹¬ ê°œë…

1. **ì½œë“œ ìŠ¤íƒ€íŠ¸ í•´ê²°**
   - ìµœì†Œ 3ê°œ í”¼ë“œë°± ìš”êµ¬
   - ì „ì²´ ì¸ê¸°ë„ ë²¡í„° ëŒ€ì•ˆ
   - í”¼ë“œë°± ìˆ˜ì§‘ ìœ ë„

2. **ì„±ëŠ¥ ìµœì í™”**
   - Redis ìºì‹± (30ë°° í–¥ìƒ)
   - ë¹„ë™ê¸° ê³„ì‚°ìœ¼ë¡œ ì‘ë‹µ ì‹œê°„ ë‹¨ì¶•
   - ë°°ì¹˜ ì²˜ë¦¬ë¡œ DB ë¶€í•˜ ê°ì†Œ

3. **ìµëª… ì‚¬ìš©ì í™˜ê²½**
   - Telegram chatId í•œê³„ ì´í•´
   - ë‹¨ê¸° ì„¸ì…˜ìœ¼ë¡œ ì·¨ê¸‰
   - 6ê°œì›” ë°ì´í„° ì •ë¦¬

### êµ¬í˜„ ì™„ë£Œ í•­ëª©

- [ ] getGlobalPopularityVector() ì „ì²´ ì¸ê¸°ë„ ë²¡í„°
- [ ] @Scheduled ë°°ì¹˜ ì²˜ë¦¬ êµ¬í˜„
- [ ] Redis ìºì‹œ TTL ì¡°ì • (7ì¼)
- [ ] ë¹„ë™ê¸° ìºì‹œ ë¬´íš¨í™”
- [ ] ë°°ì¹˜ ì²˜ë¦¬ë¡œ ì „ì²´ ì¸ê¸°ë„ ê°±ì‹ 
- [ ] PrivacyUtil í•´ì‹± ì ìš©
- [ ] ìºì‹œ ëª¨ë‹ˆí„°ë§
- [ ] ì½œë“œ ìŠ¤íƒ€íŠ¸ ì¶”ì 

### ë‹¤ìŒ ë‹¨ê³„

ìµœì í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì „ì²´ ì‹œìŠ¤í…œì„ í†µí•©í•˜ê³  ì‹¤ì œë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤:

**[05. ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ê°€ì´ë“œ](./05.integration-guide.md)**

- ì „ì²´ ì•„í‚¤í…ì²˜ êµ¬ì¡°ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?
- ì–´ë–¤ ìˆœì„œë¡œ êµ¬í˜„í•˜ë©´ ì¢‹ì„ê¹Œìš”?
- í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë¬´ì—‡ì¸ê°€ìš”?

---

**ë‹¤ìŒ**: [05. ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ê°€ì´ë“œ](./05.integration-guide.md) â†’
